{"componentChunkName":"component---src-templates-blog-template-js","path":"/solid/2021-10-16-SOLID-SRP/","result":{"data":{"cur":{"id":"3516604a-e425-519b-b85d-d356e8226fdb","html":"<h1 id=\"solid-원칙---srp-단일-책임-원칙\" style=\"position:relative;\"><a href=\"#solid-%EC%9B%90%EC%B9%99---srp-%EB%8B%A8%EC%9D%BC-%EC%B1%85%EC%9E%84-%EC%9B%90%EC%B9%99\" aria-label=\"solid 원칙   srp 단일 책임 원칙 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SOLID 원칙 - SRP (단일 책임 원칙)</h1>\n<p>한 클래스는 하나의 책임만 가져야 한다.<br>\n클래스는 그 책임을 완전히 캡슐화해야 함을 일컫는다.<br>\n클래스가 제공하는 모든 기능은 이 책임과 주의 깊게 부합해야 한다.</p>\n<blockquote>\n<p>로버트 마틴은 책임을 변경하려는 이유로 정의하고, 어떤 클래스나 모듈은 변경하려는 단 하나 이유만을 가져야 한다고 결론 짓는다. <br>\n예를 들어서 보고서를 편집하고 출력하는 모듈을 생각해 보자. 이 모듈은 두 가지 이유로 변경될 수 있다. <br>\n첫 번째로 보고서의 내용 때문에 변경될 수 있다. 두 번째로 보고서의 형식 때문에 변경될 수 있다. <br>\n이 두 가지 변경은 하나는 실질적이고 다른 하나는 꾸미기 위한 매우 다른 원인에 기인한다. <br>\n단일 책임 원칙에 의하면 이 문제의 두 측면이 실제로 분리된 두 책임 때문이며, 따라서 분리된 클래스나 모듈로 나누어야 한다.<br>\n다른 시기에 다른 이유로 변경되어야 하는 두 가지를 묶는 것은 나쁜 설계일 수 있다.<br></p>\n</blockquote>\n<h2 id=\"알아보기\" style=\"position:relative;\"><a href=\"#%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0\" aria-label=\"알아보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>알아보기</h2>\n<p>회원정보가 있다. 회원 정보에는 name,email 을 가진다.\nname 은 문자열이고, email 은 Email 형식을 가져야 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 169px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 73.37278106508876%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACWElEQVQ4y41UC0/bQAzO//8dGwIGYpMG4hEqxqtdCbR0iL4oyYVcXr282rSMlvab7BIm1qHtJMfn85eL/dmO5jgOHh4eYNsCQghYlsWahHyFn8VxIKWzhLNtG6ZpMlZrtjuo1H5gMBzi8fER4/F4oUcjuK6EUhH6SiGKYyjVh+8HL5gx6wKf5zm63S401/MQxhmW1wybm5vYWF3B2qctrK5vYH19BVufv+C9RZFqlOrT009kWbYkaZohSRKWKIoQxzHSNF0SwpKv1WpBo4eU8pWL+/t7CLHgpNPpsCa+CFNwSkLYgl/yEeb6+hqa50oO97ZRw9ftHZydH+PsvAJHutjTD3Gi72Nndw89y8K/FgWl+b7PRpbE8DyPyY+Uwmg85jQHWQrLMiFdj3HT6RTPz8+YTCasyZ7NZmxTNloYhn/9GgH+XMXLJMWeLi1svlA6DuYAysclbO8eQD/Yhn50AmHeYe3jB+zqR9g/1GGa4v8i9L1FKqHvIexHkI7NejqdgPiN0wzdbgd+0H/bVLPZG3s+n3NhNKok8egHAcIwQBCErF3XBdERBnQWMMbhSZGvFS/2hKWqNxoNaHQrdTn10nA4RJom3FNs5zkGgwGUUkjSlP2ELfqSNGFJE6bZbEILAw9xpHhsyuen2D/QUSod4eamgUrlO06/lXDbuoMlBIxqBeVyFSpO3p8UIaxFlzebqF0ZuDAM1Gp15s24uMClUUW9cQNL2KhfGbi8qiOktspzjpZkNBpxJu12my78/WchLpiblwkgW0qXq1dMBJ0Rvtfr8XkxSYX9C+T3Wfnq7Mh+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img.png\"\n        title=\"img.png\"\n        src=\"/static/5ce51100963b5804262dc55b45413945/d23e3/solid-s-uml01.png\"\n        srcset=\"/static/5ce51100963b5804262dc55b45413945/d23e3/solid-s-uml01.png 169w\"\n        sizes=\"(max-width: 169px) 100vw, 169px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>Account</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">InvalidParameterException</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Account</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> email<span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">Account</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> email<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">validEmail</span><span class=\"token punctuation\">(</span>email<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> email<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">void</span> <span class=\"token function\">validEmail</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> email<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">String</span> ePattern <span class=\"token operator\">=</span> <span class=\"token string\">\"^[a-zA-Z0-9.!#$%&amp;'*+/=?^_`{|}~-]+@((\\\\[[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\])|(([a-zA-Z\\\\-0-9]+\\\\.)+[a-zA-Z]{2,}))$\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>regex<span class=\"token punctuation\">.</span></span>Pattern</span> p <span class=\"token operator\">=</span> <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>regex<span class=\"token punctuation\">.</span></span>Pattern</span><span class=\"token punctuation\">.</span><span class=\"token function\">compile</span><span class=\"token punctuation\">(</span>ePattern<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>regex<span class=\"token punctuation\">.</span></span>Matcher</span> m <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span><span class=\"token function\">matcher</span><span class=\"token punctuation\">(</span>email<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">.</span><span class=\"token function\">matches</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>m<span class=\"token punctuation\">.</span><span class=\"token function\">matches</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">InvalidParameterException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"이메일 형식이 아닙니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>Account 는 회원정보를 담는 객체이다. 하지만, validEmail() 의 이메일 검증 행동이 추가 되었다.<br>\n그렇다면 Account 객체가 이메일 검증 행동과 관계가 있는가?<br>\nAccount 정보는 email 이라는 문자열(String) 타입을 가지고있다. String 은 문자열 일뿐 Email 포맷을 증명하지 못한다.<br>\n그래서 그것을 증명하기 위해 validEmail() 메소드가 추가 되었다. Account 는 스스로 email 포맷까지 증명하고 있다는 것이다.<br>\n생각해보면 <em>email</em> 과 <em>validEmail()</em> 은 관계성을 가진다. <em>validEmail()</em> 에 의해 통과 되어야 email 을 가질 수 있는것이다.<br>\n그렇다면 Email 이라는 타입을 정의하고 스스로 이메일을 검증한다면 단일 책임 원칙을 가지는게 아닐까?<br>\n그리고 Account 는 Email 객체를 가진다면, 단일 책임을 행할 수 있는게 아닐까?</p>\n<hr>\n<p>다음은 Account 와 Email 사이의 책임을 분리시켜보았다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 496px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.111111111111107%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA50lEQVQY012Q2W6EMAxF+f+fK+08ANMOUAYwEPZdbLe6llqpE8mJ41gnJ7FSEbRdD2MKvNk2PM/DMAxomgbTNOE8TxzH8S/qpsUwjJinCWEYwphSe6uqgsUpjmP4vo/H4wvjOGJdV4UyJ3Df9z8Y95JlSNMUWSaw7XcYY7AsC0QEVtu2apMXOYrCgOO6LoWWZangruvQ973mvPw7DJGJIEkStWIvg2Arz3MEgQ/HcRAEAaLnUwF1XSvg1ZB1gth/u33AdV3c75+gGOtqKJIiiiIt8E9pQyif8fqHtN+2Tc9o9bsy5nnGD7Lte2TLsWVgAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img.png\"\n        title=\"img.png\"\n        src=\"/static/57ee7cbeda6a589e9f19cdade1e74571/bb630/solid-s-uml02.png\"\n        srcset=\"/static/57ee7cbeda6a589e9f19cdade1e74571/e9ff0/solid-s-uml02.png 180w,\n/static/57ee7cbeda6a589e9f19cdade1e74571/f21e7/solid-s-uml02.png 360w,\n/static/57ee7cbeda6a589e9f19cdade1e74571/bb630/solid-s-uml02.png 496w\"\n        sizes=\"(max-width: 496px) 100vw, 496px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>Account</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">InvalidParameterException</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Account</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Email</span> email<span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">Account</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> name<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Email</span> email<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>name <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> email<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">getName</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n   <span class=\"token keyword\">return</span> name<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">Email</span> <span class=\"token function\">getEmail</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> email<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<ul>\n<li>Email</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>security<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">InvalidParameterException</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Email</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> email<span class=\"token punctuation\">;</span>\n  \n  <span class=\"token keyword\">public</span> <span class=\"token class-name\">Email</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> email<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">validEmail</span><span class=\"token punctuation\">(</span>email<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>email <span class=\"token operator\">=</span> email<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  \n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">validEmail</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> email<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">String</span> ePattern <span class=\"token operator\">=</span> <span class=\"token string\">\"^[a-zA-Z0-9.!#$%&amp;'*+/=?^_`{|}~-]+@((\\\\[[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\])|(([a-zA-Z\\\\-0-9]+\\\\.)+[a-zA-Z]{2,}))$\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>regex<span class=\"token punctuation\">.</span></span>Pattern</span> p <span class=\"token operator\">=</span> <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>regex<span class=\"token punctuation\">.</span></span>Pattern</span><span class=\"token punctuation\">.</span><span class=\"token function\">compile</span><span class=\"token punctuation\">(</span>ePattern<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>util<span class=\"token punctuation\">.</span>regex<span class=\"token punctuation\">.</span></span>Matcher</span> m <span class=\"token operator\">=</span> p<span class=\"token punctuation\">.</span><span class=\"token function\">matcher</span><span class=\"token punctuation\">(</span>email<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">.</span><span class=\"token function\">matches</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>m<span class=\"token punctuation\">.</span><span class=\"token function\">matches</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">InvalidParameterException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"이메일 형식이 아닙니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>이제 Account 는 Email 객체를 가지게 되어 이메일 검증을 통과된 Email 타입 객체를 가질 수 있게 되었다.<br>\n추후 Email 검증 로직이 변경 되더라도, Account 는 이메일 검증로직 변화에 좀 더 자유로워 질 수 있다.<br>\n하지만, Account 는 스스로 완전한 상태가 아닌 Email 과의 관계성이 추가되었다.</p>\n<hr>\n<h2 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h2>\n<p>처음에는 혼란스러웠다. 단일 책임이라…\nAccount 와 Email 을 굳이 분리를 해야하나…라는 생각이었다.<br>\n확실히 분리 하고보니 코드의 안정감이 생겼다.\n이게 맞다 틀리다라고 생각하기 보단 객체 지향 관점에서 사고 할려고 노력하는게 맞는것 같다.<br>\n무조건 저렇게 해야되 라기 보단 어떻게 보면 방법론이니까 그것을 지향하는 쪽으로 사고 훈련을 해야 될 것 같다.</p>\n<h3 id=\"참고링크\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EB%A7%81%ED%81%AC\" aria-label=\"참고링크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고링크</h3>\n<p><a href=\"https://ko.wikipedia.org/wiki/SOLID_(%EA%B0%9D%EC%B2%B4_%EC%A7%80%ED%96%A5_%EC%84%A4%EA%B3%84)\">SOLID 객체지향 설계 위키백과</a></p>","excerpt":"SOLID 원칙 - SRP (단일 책임 원칙) 한 클래스는 하나의 책임만 가져야 한다. 클래스는 그 책임을 완전히 캡슐화해야 함을 일컫는다. 클래스가 제공하는 모든 기능은 이 책임과 주의 깊게 부합해야 한다. 로버트 마틴은 책임을 변경하려는 이유로 정의하고, 어떤 클래스나 모듈은 변경하려는 단 하나 이유만을 가져야 한다고 결론 짓는다. \n예를 들어서 보고서를 편집하고 출력하는 모듈을 생각해 보자. 이 모듈은 두 가지 이유로 변경될 수 있다. \n첫 번째로 보고서의 내용 때문에 변경될 수 있다. 두 번째로 보고서의 형식 때문에 변경될 수 있다. \n이 두 가지 변경은 하나는 실질적이고 다른 하나는 꾸미기 위한 매우 다른 원인에 기인한다. \n단일 책임 원칙에 의하면 이 문제의 두 측면이 실제로 분리된 두 책임 때문이며, 따라서 분리된 클래스나 모듈로 나누어야 한다.\n다른 시기에 다른 이유로 변경되어야 하는 두 가지를 묶는 것은 나쁜 설계일 수 있다. 알아보기 회원정보가 있다. 회원 정보에…","frontmatter":{"date":"October 16, 2021","title":"SOLID 원칙(1) - 단일 책임 원칙 알아보기 (SRP)","categories":"프로그래밍","author":"wooobo","emoji":"🔮"},"fields":{"slug":"/solid/2021-10-16-SOLID-SRP/"}},"next":{"id":"23705888-6cc4-587d-b484-da8331554251","html":"<h1 id=\"kafka-connect를-활용하여-file-source-해보기\" style=\"position:relative;\"><a href=\"#kafka-connect%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%98%EC%97%AC-file-source-%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"kafka connect를 활용하여 file source 해보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Kafka Connect를 활용하여 File Source 해보기</h1>\n<ol>\n<li>kafka, zookeeper가 실행되어있어야 합니다.(카프가가 없으시다면 공식 홈페이지에서 <a href=\"https://www.apache.org/dyn/closer.cgi?path=/kafka/2.7.0/kafka_2.13-2.7.0.tgz\">다운로드</a>)\n(처음 이시라면 <a href=\"https://kth12.github.io/kafka-quick-start/\">참고</a>)</li>\n<li>kafka/config 폴더를 열어보면 아래의 파일들이 존재합니다.\nconnect-file-sink.properties<br>\nconnect-standalone.properties\n위 파일들을 확용하여 File을 감시해보겠습니다.</li>\n</ol>\n<hr>\n<h3 id=\"configconnect-file-sourceproperties\" style=\"position:relative;\"><a href=\"#configconnect-file-sourceproperties\" aria-label=\"configconnect file sourceproperties permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>config/connect-file-source.properties</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token assign-left variable\">name</span><span class=\"token operator\">=</span>local-file-source\n<span class=\"token assign-left variable\">connector.class</span><span class=\"token operator\">=</span>FileStreamSource\n<span class=\"token assign-left variable\">tasks.max</span><span class=\"token operator\">=</span><span class=\"token number\">1</span>\n<span class=\"token assign-left variable\">file</span><span class=\"token operator\">=</span><span class=\"token punctuation\">..</span>/example/source.txt\n<span class=\"token assign-left variable\">topic</span><span class=\"token operator\">=</span>connect-test</code></pre></div>\n<p>위 설정 파일은, connect 이름 / connect 라이브러리(connect class) / Source Topic 이름  등등을 설정 할수 있습니다.</p>\n<h3 id=\"configconnect-standaloneproperties\" style=\"position:relative;\"><a href=\"#configconnect-standaloneproperties\" aria-label=\"configconnect standaloneproperties permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>config/connect-standalone.properties</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token assign-left variable\">bootstrap.servers</span><span class=\"token operator\">=</span>localhost:9092\n<span class=\"token assign-left variable\">key.converter</span><span class=\"token operator\">=</span>org.apache.kafka.connect.json.JsonConverter\n<span class=\"token assign-left variable\">value.converter</span><span class=\"token operator\">=</span>org.apache.kafka.connect.json.JsonConverter\n<span class=\"token assign-left variable\">key.converter.schemas.enable</span><span class=\"token operator\">=</span>true\n<span class=\"token assign-left variable\">value.converter.schemas.enable</span><span class=\"token operator\">=</span>true\n\n<span class=\"token assign-left variable\">offset.storage.file.filename</span><span class=\"token operator\">=</span>/tmp/connect.offsets\n<span class=\"token assign-left variable\">offset.flush.interval.ms</span><span class=\"token operator\">=</span><span class=\"token number\">10000</span></code></pre></div>\n<p>카프카 서버 주소 설정 / Source key, value 타입 지정 / 감시할 파일 이름 등등을 설정 할 수 있습니다.</p>\n<h2 id=\"실행-해보기\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%ED%96%89-%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"실행 해보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실행 해보기</h2>\n<p>기본 설정 파일에 대해 알아보았고 실행 예제를 알아보겠습니다.</p>\n<p>실행에 앞서 감시할 파일을 생성하여 줍니다.</p>\n<p>저같은 경우 “source.txt” 라는 파일을 생성해주었습니다.</p>\n<h3 id=\"실행-커맨드\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%ED%96%89-%EC%BB%A4%EB%A7%A8%EB%93%9C\" aria-label=\"실행 커맨드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실행 커맨드</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ bin/connect-standalone.sh config/connect-standalone.properties config/connect-file-source.properties\n\nINFO Kafka startTimeMs: <span class=\"token number\">1615649461180</span> <span class=\"token punctuation\">(</span>org.apache.kafka.common.utils.AppInfoParser:121<span class=\"token punctuation\">)</span>\nINFO <span class=\"token punctuation\">[</span>Producer <span class=\"token assign-left variable\">clientId</span><span class=\"token operator\">=</span>connector-producer-local-file-source-0<span class=\"token punctuation\">]</span> Cluster ID: ovrhH6KaQnOfZ0SseIBV6g <span class=\"token punctuation\">(</span>org.apache.kafka.clients.Metadata:279<span class=\"token punctuation\">)</span>\nINFO WorkerSourceTask<span class=\"token punctuation\">{</span>id<span class=\"token operator\">=</span>local-file-source-0<span class=\"token punctuation\">}</span> Source task finished initialization and start <span class=\"token punctuation\">(</span>org.apache.kafka.connect.runtime.WorkerSourceTask:233<span class=\"token punctuation\">)</span>\nINFO Created connector local-file-source <span class=\"token punctuation\">(</span>org.apache.kafka.connect.cli.ConnectStandalone:112<span class=\"token punctuation\">)</span>\n \n<span class=\"token comment\"># 위 출력 로그처럼 정상적으로 실행이 되었다면 파일을 수정해보겠습니다.</span>\n\n$ <span class=\"token function\">cat</span> <span class=\"token operator\">>></span> source.txt\n\thi\n\thello\n\n<span class=\"token comment\"># 감시 파일(source.txt)에 내용을 입력 하였습니다.</span>\n\n$ bin/kafka-console-consumer.sh <span class=\"token parameter variable\">--topic</span> connect-test --from-beginning  --bootstrap-server localhost:9092\n<span class=\"token punctuation\">{</span><span class=\"token string\">\"schema\"</span>:<span class=\"token punctuation\">{</span><span class=\"token string\">\"type\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"string\"</span>,<span class=\"token string\">\"optional\"</span>:false<span class=\"token punctuation\">}</span>,<span class=\"token string\">\"payload\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"hi\"</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">{</span><span class=\"token string\">\"schema\"</span>:<span class=\"token punctuation\">{</span><span class=\"token string\">\"type\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"string\"</span>,<span class=\"token string\">\"optional\"</span>:false<span class=\"token punctuation\">}</span>,<span class=\"token string\">\"payload\"</span><span class=\"token builtin class-name\">:</span><span class=\"token string\">\"hello\"</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\"># 파일에서 입력했던 내용들을 컨슘되는것을 확인할 수 있습니다.</span>\n<span class=\"token comment\"># 터미널 창을 하나 더 열어 내용을 추가적으로 넣어서 실시간 동기화 되는지 확인해보겠습니다.</span></code></pre></div>\n<h3 id=\"실행-화면\" style=\"position:relative;\"><a href=\"#%EC%8B%A4%ED%96%89-%ED%99%94%EB%A9%B4\" aria-label=\"실행 화면 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>실행 화면</h3>\n<p><img src=\"/100d83b03f60cb767cde16c10db7e29e/kafkaconnectgif.gif\" alt=\"img.png\"></p>\n<hr>\n<h3 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h3>\n<p>가장 간단하게 카프카 커넥트 예제에 대해서 알아 보았습니다.</p>\n<p>카프카 커넥트는 여러 플러그인을 붙여 다양한 데이터 소스를 커넥트 할 수 있습니다.</p>\n<p>예로, debezium 오픈소스 플러그인을 활용하면</p>\n<p>mysql, mongoDB, PostgreSQL,Oracle,SqlServer 등 데이터 베이스를 감시하고 데이터를 Source 할 수 있습니다.</p>","frontmatter":{"date":"March 14, 2021","title":"Kafka connect File Source 알아보기 & 실행","categories":"kafka","author":"wooobo","emoji":"🔮"},"fields":{"slug":"/kafka/2021-03-14-kafka-connect-action/"}},"prev":{"id":"c8337e75-f406-5faf-ae68-0e7193a1130e","html":"<br>\n<br>\n# SOLID 원칙 - OCP (개방 폐쇄 원칙)\n<p>“소프트웨어 요소는 확장에는 열려 있으나 변경에는 닫혀 있어야 한다.”</p>\n<blockquote>\n<p>소프트웨어 개발 작업에 이용된 많은 모듈 중에 하나에 수정을 가할 때 그 모듈을 이용하는 다른 모듈을 줄줄이 고쳐야 한다면, 이와 같은 프로그램은 수정하기가 어렵다. 개방-폐쇄 원칙은 시스템의 구조를 올바르게 재조직(리팩토링)하여 나중에 이와 같은 유형의 변경이 더 이상의 수정을 유발하지 않도록 하는 것이다. 개방-폐쇄 원칙이 잘 적용되면, 기능을 추가하거나 변경해야 할 때 이미 제대로 동작하고 있던 원래 코드를 변경하지 않아도, 기존의 코드에 새로운 코드를 추가함으로써 기능의 추가나 변경이 가능하다.</p>\n</blockquote>\n<p><em><strong>1. 확장에 대해 열려 있다.</strong></em></p>\n<blockquote>\n<p>이것은 모듈의 동작을 확장할 수 있다는 것을 의미한다. 애플리케이션의 요구 사항이 변경될 때, 이 변경에 맞게 새로운 동작을 추가해 모듈을 확장할 수 있다. 즉, 모듈이 하는 일을 변경할 수 있다.</p>\n</blockquote>\n<p><em><strong>2. 수정에 대해 닫혀 있다</strong></em></p>\n<blockquote>\n<p>이것은 모듈의 동작을 확장할 수 있다는 것을 의미한다. 애플리케이션의 요구 사항이 변경될 때, 이 변경에 맞게 새로운 동작을 추가해 모듈을 확장할 수 있다. 즉, 모듈이 하는 일을 변경할 수 있다.</p>\n</blockquote>\n<p><em><strong>3. 추상화를 통한 개방-폐쇄 원칙</strong></em></p>\n<blockquote>\n<p>객체 지향 프로그래밍 언어(JAVA, C++ 등)에서는 고정되기는 해도 제한되지는 않은, 가능한 동작의 묶음을 표현하는 추상화가 가능하다. 모듈은 추상화를 조작할 수 있다. 이런 모듈은 고정된 추상화에 의존하기 때문에 수정에 대해 닫혀 있을 수 있고, 반대로 추상화의 새 파생 클래스를 만드는 것을 통해 확장도 가능하다. 따라서 추상화는 개방-폐쇄 원칙의 핵심 요소이다.</p>\n</blockquote>\n<p><em><strong>4. 개방-폐쇄 원칙과 객체 지향 언어의 관계</strong></em></p>\n<blockquote>\n<p>개방-폐쇄 원칙은 객체 지향 프로그래밍의 핵심 원칙이라고 할 수 있다. 개방-폐쇄 원칙을 따르지 않는다고 해서 객체 지향 언어(Java, C++ 등)을 구현이 불가능한 것은 아니지만 이 원칙을 무시하고 프로그래밍을 한다면, 객체 지향 프로그래밍의 가장 큰 장점인 유연성, 재사용성, 유지보수성 등을 결코 얻을 수 없다. 따라서 객체 지향 프로그래밍 언어에서 개방-폐쇄 원칙은 반드시 지켜야할 기본적인 원칙이다.</p>\n</blockquote>\n<hr>\n<h2 id=\"알아보기\" style=\"position:relative;\"><a href=\"#%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0\" aria-label=\"알아보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>알아보기</h2>\n<p>소셜 로그인을 만들려고 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 361px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsUlEQVQY03VQiwqDMBDr///bdGyUCf7BVh99+ySSGw4nWyFcTXO5eGqeZyzLAtYzyO9vrNM0IYQgSCkhxijVe4+cs+gURW3bwlr7Beec8Hyn2bquGIYBfd/DvJ7QWqOua1SPCiFG6RnHEYrOKWc0TYOyuOB6u6MsCljnJQGNmYI6Y4yk49n/giY85KlRJDhVjFP6gN/kzwk5mD28H9F13Tshp7CZe9j3c9zTvx3+0nKHGzd2ghFudtQOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img.png\"\n        title=\"img.png\"\n        src=\"/static/64b984688ef5a58138188254285616b7/39d76/solid-uml04.png\"\n        srcset=\"/static/64b984688ef5a58138188254285616b7/e9ff0/solid-uml04.png 180w,\n/static/64b984688ef5a58138188254285616b7/f21e7/solid-uml04.png 360w,\n/static/64b984688ef5a58138188254285616b7/39d76/solid-uml04.png 361w\"\n        sizes=\"(max-width: 361px) 100vw, 361px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">OAuthHandler</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">oauthConnect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OAuthGoogle</span> oAuthGoogle<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    oAuthGoogle<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>OAuthHandler 는 OAuthGoogle 의 connect 메소드를 호출한다.<br>\n하지만, 추후 Facebook OAuth 연동이 추가되면 어떻게 될까?</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">OAuthHandler</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">oauthConnect</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> channel<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"google\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">OAuthGoogle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">.</span><span class=\"token function\">equals</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"facebook\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">new</span> <span class=\"token class-name\">OAuthFacebook</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>여러 예시가 있겠지만 현재 상태로는 OAuthHandler 를 수정해야 될 수 밖에 없다.<br>\n그러므로, OAuth 기능에 채널을 추가 할려고 할 때마다 OAuthHandler 도 신경써야하는 일이 발생한다. 채널을 추가 하기에는 어렵고 수정은 해야 하는 상황이 되어버렸다.<br>\n확장은 열려있고 수정은 닫혀있어야 하는 개방/폐쇄 원칙을 위반하게 된다.</p>\n<p>추상화를 통해 해당부분을 해결 해 보자.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 371px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPUlEQVQoz21S7W6CQBDk/d+s/CRtU63aCidN1ePuABUUnGbGHjG2m2wW9mN2dvcS5xyapsHxeMThcJANIUiv16v0crnon7HT6ST13suO44hhGCZNCMbkxfscq49PrJZLdF0vX9u2st/brZouF3OkTymeX17R9bccgpzPZzWlJlVVIXiPPM9hzEa2aVtYa8W4rgNsVcHu95jN3pCmKbIsg/MBdV2LIYEILECy4Ch936PrOln6CMbkOBL/ybIoCsQ1MTcCTYDc0X1h/KYyFiWORWGMYOMwTnHmaoePHWjJlPuxdg9jDPK8wFdZihXZ0+52O6zXa62oLEuthSv4A8juHE8H8e5WVBQqGoYR2nkI8M4JbGOMcuqm0eWT+5NHwPiEHoVjsYhM/pMJ8JEh3xevzEImxXdJjb57v//1k/0PIS61gaDUZu8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"img.png\"\n        title=\"img.png\"\n        src=\"/static/38c8c022a56e2a71955bd0c3aa8028e6/d4635/solid-uml05.png\"\n        srcset=\"/static/38c8c022a56e2a71955bd0c3aa8028e6/e9ff0/solid-uml05.png 180w,\n/static/38c8c022a56e2a71955bd0c3aa8028e6/f21e7/solid-uml05.png 360w,\n/static/38c8c022a56e2a71955bd0c3aa8028e6/d4635/solid-uml05.png 371w\"\n        sizes=\"(max-width: 371px) 100vw, 371px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>OAuthHandler 가 직접적으로 OAuthGoogle 을 호출 하던 것을 OAuthClient 인터페이스를 두어 OAuthHandler 가 각각의 구현체(OAuthGoogle, OAuthFacebook) 을 모르게 하였다.<br>\n이제는 OAuthHandler 가 OAuthClient 에게 메시지를 보낼 뿐 OAuth 채널이 추가 되더라도 변동 상황이 없어졌다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">OAuth</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>  \n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">OAuthGoogle</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OAuth</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">OAuthFacebook</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">OAuth</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">OAuthHandler</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">updateExpireDate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">OAuth</span> oAuth<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        oAuth<span class=\"token punctuation\">.</span><span class=\"token function\">connect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제는 OAuthNaver 가 추가 되더라도 OAuthNaver 만 신경쓰면된다.<br>\nOAuth 기능 확장은 자유로워 졌고, OAuthHandler 의 수정은 없어지게 되었다.</p>\n<h3 id=\"정리\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%A6%AC\" aria-label=\"정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>정리</h3>\n<p>OAuthHandler 는 변경에 닫혀 있고 OAuth 는 변경에 열려 있는것처럼,<br>\n변경 가능한것과 덜 변경되는 부분을 잘 고려해서 설계 한다면, OCP 장점처럼 유연성과 유지보수성을 증가 시킬 수 있을 것 같다.</p>\n<h3 id=\"참고링크\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EB%A7%81%ED%81%AC\" aria-label=\"참고링크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고링크</h3>\n<p><a href=\"https://ko.wikipedia.org/wiki/SOLID_(%EA%B0%9D%EC%B2%B4_%EC%A7%80%ED%96%A5_%EC%84%A4%EA%B3%84)\">SOLID 객체지향 설계 위키백과</a></p>","frontmatter":{"date":"October 16, 2021","title":"SOLID 원칙(2) - 개방 폐쇄 원칙 알아보기 OCP","categories":"프로그래밍","author":"wooobo","emoji":"🔮"},"fields":{"slug":"/solid/2021-10-16-SOLID-OCP/"}},"site":{"siteMetadata":{"siteUrl":"https://wooobo.github.io","comments":{"utterances":{"repo":""}}}}},"pageContext":{"slug":"/solid/2021-10-16-SOLID-SRP/","nextSlug":"/kafka/2021-03-14-kafka-connect-action/","prevSlug":"/solid/2021-10-16-SOLID-OCP/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}